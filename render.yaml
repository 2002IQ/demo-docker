services:
  # ML Service - Sentiment Analysis API
  - type: web
    name: ml-service
    runtime: docker
    dockerfilePath: ./ml/Dockerfile
    dockerContext: ./ml
    plan: free
    healthCheckPath: /docs
    envVars:
      - key: PORT
        value: 8080

  # YouTube Backend API
  - type: web
    name: yt-backend
    runtime: docker
    dockerfilePath: ./yt-backend/Dockerfile
    dockerContext: ./yt-backend
    plan: free
    healthCheckPath: /docs
    envVars:
      - key: PORT
        value: 8080
      - key: YOUTUBE_KEY
        sync: false  # You'll need to add this in Render dashboard
      - key: ML_URL
        value: https://ml-service-7kfl.onrender.com

  # Reddit Backend API
  - type: web
    name: reddit-backend
    runtime: docker
    dockerfilePath: ./reddit-backend/Dockerfile
    dockerContext: ./reddit-backend
    plan: free
    healthCheckPath: /docs
    envVars:
      - key: PORT
        value: 8080
      - key: REDDIT_APP_ID
        sync: false  # You'll need to add this in Render dashboard
      - key: REDDIT_APP_SECRET
        sync: false  # You'll need to add this in Render dashboard
      - key: REDDIT_APP_NAME
        sync: false  # You'll need to add this in Render dashboard
      - key: ML_URL
        value: https://ml-service-7kfl.onrender.com

  # Frontend - Streamlit Dashboard
  - type: web
    name: frontend
    runtime: docker
    dockerfilePath: ./frontend/Dockerfile
    dockerContext: ./frontend
    plan: free
    healthCheckPath: /_stcore/health
    envVars:
      - key: PORT
        value: 8501
      - key: HOST
        value: 0.0.0.0
      - key: YT_URL
        value: https://yt-backend-a88b.onrender.com/charts/multibrand
      - key: REDDIT_URL
        value: https://reddit-backend-gztk.onrender.com/charts/multibrand


